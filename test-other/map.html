<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>绘制一条折线</title>
    <style>
        html,
        body,
        #map-canvas {
            margin: 0;
            padding: 0;
            height: 100%;
        }
    </style>
    <script src="https://api.map.so.com/js?key=您的密钥"></script>
    <script src="coordtransform.js"></script>
    <script>
        var p1_str = "116.63774,40.27282;116.63629,40.272575;116.63496,40.27208;116.63393,40.271587;116.63333,40.271152;116.63303,40.270817;116.632904,40.270588;116.632866,40.270443;116.63284,40.270317;116.632835,40.270206;116.63283,40.270157;116.63283,40.27011;116.63283,40.27007;116.63283,40.27003;116.632835,40.27;116.63285,40.269966;116.63287,40.269924;116.63286,40.2699;116.63285,40.269882;116.63282,40.269875;116.6328,40.269882;116.6328,40.26988;116.6328,40.269875;116.63279,40.269875;116.63278,40.26988;116.63279,40.26988;116.63278,40.26988;116.632774,40.26988;116.63277,40.26988;116.63277,40.26987;116.63276,40.26983;116.632744,40.269756;116.6327,40.2696;116.63257,40.269314;116.63238,40.26887;116.63217,40.268215;116.63198,40.26737;116.6318,40.266525;116.63169,40.26565;116.63162,40.26495;116.631584,40.2644;116.63156,40.263996;116.631546,40.263653;116.63153,40.26343;116.63149,40.263252;116.631355,40.26314;116.63124,40.263115;116.63112,40.263103;116.63106,40.263103;116.631004,40.263096;116.63095,40.263092;116.63092,40.263084;116.63086,40.26308;116.63082,40.263077;116.63079,40.263073;116.63076,40.263077;116.630745,40.263073;116.630714,40.26307;116.63071,40.26307;116.6307,40.26307;116.63069,40.26307;116.630684,40.26307;116.63068,40.263073;116.63067,40.263073;116.63068,40.263073;116.630684,40.263073;116.630684,40.263077;116.63069,40.263077;116.6307,40.263077;116.63071,40.263077;116.63071,40.26308;116.630714,40.26308;116.63072,40.26308;116.63072,40.263084;116.63072,40.26309;116.630714,40.26309;116.63071,40.26309;116.6307,40.26309;116.6307,40.263084;116.63069,40.26308;116.630684,40.263077;116.63067,40.263065;116.63059,40.263058;116.630486,40.26305;116.630226,40.26303;116.62963,40.26299;116.62884,40.262928;116.62801,40.262875;116.62701,40.262825;116.62598,40.262817;116.62498,40.262825;116.624115,40.262833;116.62331,40.262836;116.62268,40.262836;116.62212,40.26283;116.62156,40.262833;116.62109,40.26285;116.62075,40.26286;116.620445,40.262863;116.62027,40.26287;116.62012,40.26287;116.619995,40.262875;116.619934,40.262875;116.61988,40.262875;116.61983,40.26287;116.61978,40.262856;116.61974,40.26284;116.61971,40.262817;116.61969,40.26279;116.61968,40.26276;116.61968,40.26273;116.61968,40.262703;116.61968,40.262684;116.61969,40.26267;116.61969,40.262665;116.6197,40.262634;116.619705,40.26251;116.61976,40.26224;116.61986,40.26184;116.619965,40.26142;116.62006,40.261;116.62017,40.260574;116.6203,40.260033;116.62039,40.25956;116.62044,40.259117;116.62046,40.258694;116.62047,40.25837;116.62047,40.25806;116.62046,40.257843;116.62045,40.25766;116.62044,40.257504;116.62044,40.257397;116.620415,40.2573;116.62038,40.257225;116.62027,40.257164;116.62018,40.257156;116.619995,40.257168;116.619774,40.257187;116.61946,40.25722;116.619125,40.257244;116.61878,40.25727;116.61845,40.257313;116.61807,40.257347;116.617615,40.2574;116.61729,40.257538;116.61675,40.25762;116.61621,40.257687;116.61568,40.257748;116.615135,40.257816;116.6146,40.25788;116.614105,40.25794;116.61362,40.258;116.61314,40.258057;116.61276,40.258114;116.6124,40.258167;116.612045,40.25821;116.611694,40.258247;116.61136,40.25828;116.611115,40.258312;116.610886,40.25833;116.61074,40.258347;116.6106,40.258366;116.61048,40.25838;116.61042,40.258392;116.610374,40.258404;116.61034,40.258415;116.610306,40.258427;116.61028,40.258446;116.61027,40.258465;116.61025,40.25848;116.610245,40.2585;116.61024,40.25851;116.61023,40.25853;116.61023,40.258545;116.61023,40.258556;116.61023,40.258568;116.61023,40.25858;116.61023,40.258587;116.61023,40.2586;116.61024,40.258606;116.61024,40.258614;116.610245,40.25862;116.610245,40.258633;116.610245,40.258636;116.61032,40.258644;116.61032,40.258648;116.61031,40.258648;116.61031,40.25865;116.61031,40.258656;116.61031,40.25866;116.610306,40.25866;116.6103,40.25866;116.6103,40.258656;116.61029,40.258656;116.61028,40.258656;116.61028,40.25865;116.610275,40.25865;116.61027,40.25865;116.61026,40.25865;116.61026,40.258648;116.61025,40.258648;116.610245,40.258648;116.61024,40.258644;116.61024,40.25864;116.610245,40.25864;116.61024,40.25864;116.610245,40.25864;116.61025,40.25864;116.610245,40.25864;116.61027,40.258656;116.61031,40.25868;116.610374,40.258686;116.61046,40.25868;116.610634,40.258667;116.61085,40.258682;116.611176,40.25869;116.61151,40.258694;116.61184,40.258698;116.61215,40.2587;116.61239,40.2587;116.61262,40.2587;116.61283,40.2587;116.613045,40.2587;116.61324,40.258705;116.613365,40.258705;116.61348,40.25871;116.613594,40.25871;116.6137,40.25871;116.6138,40.258717;116.613884,40.25872;116.61397,40.25872;116.614044,40.25872;116.61413,40.258717;116.614204,40.258717;116.61428,40.25872;116.61436,40.258736;116.61439,40.258755;116.61442,40.258774;116.61444,40.258797;116.614456,40.258823;116.61447,40.25885;116.61447,40.258877;116.61447,40.258904;116.61447,40.258926;116.61446,40.25895;116.61446,40.25897;116.61446,40.258987;116.614456,40.259003;116.614456,40.259018;116.61444,40.259033;116.61443,40.259045;116.61442,40.259052;116.61441,40.259064;116.614395,40.259068;116.61438,40.259068;116.61437,40.25907"

        var p2_str = "116.931136,40.396652;116.931097,40.396683;116.931051,40.396712;116.931003,40.396733;116.930954,40.396756;116.930909,40.396777;116.930867,40.396797;116.93083,40.396812;116.930791,40.396822;116.930749,40.396823;116.930708,40.396812;116.930677,40.396792;116.930657,40.396772;116.930639,40.396754;116.930624,40.396741;116.930614,40.396732;116.930608,40.396728;116.930606,40.396726;116.930605,40.396726;116.930605,40.396727;116.930605,40.396727"

        var p3_str = "116.614368,40.259066;116.614367,40.259069;116.614366,40.25907;116.614366,40.259071;116.614371,40.25907;116.614382,40.259069;116.614395,40.259066;116.614408,40.259062;116.614421,40.259054;116.614433,40.259045;116.614444,40.259033;116.614453,40.259018;116.614458,40.259003;116.614463,40.258986;116.614466,40.258968;116.614467,40.258948;116.614469,40.258927;116.61447,40.258904;116.614471,40.258878;116.614469,40.25885;116.61446,40.258823;116.614444,40.258796;116.61442,40.258772;116.614391,40.258753;116.614358,40.258737;116.614322,40.258726;116.614283,40.25872;116.614244,40.258717;116.614204,40.258716;116.614165,40.258717;116.614125,40.258718;116.614086,40.258719;116.614046,40.25872;116.614007,40.258721;116.613968,40.258721;116.613927,40.258721;116.613885,40.258719;116.613842,40.258718;116.613798,40.258715;116.613751,40.258713;116.6137,40.25871;116.613647,40.258709;116.613591,40.258708;116.613535,40.258708;116.613479,40.258708;116.613421,40.258707;116.613362,40.258706;116.613302,40.258705;116.613242,40.258705;116.613181,40.258704;116.613116,40.258703;116.613048,40.258702;116.612978,40.258702;116.612906,40.258702;116.612834,40.258701;116.612762,40.258701;116.61269,40.258702;116.612618,40.258702;116.612544,40.258702;116.612467,40.258702;116.612391,40.258702;116.612313,40.258701;116.612234,40.258701;116.612155,40.2587;116.612076,40.2587;116.611996,40.258699;116.611916,40.258699;116.611836,40.258698;116.611756,40.258697;116.611675,40.258696;116.611593,40.258695;116.61151,40.258694;116.611426,40.258694;116.611342,40.258692;116.611259,40.25869;116.611175,40.258689;116.611092,40.258688;116.611008,40.258688;116.610926,40.258687;116.610846,40.258683;116.610771,40.258675;116.610699,40.258669;116.610631,40.258667;116.610569,40.258668;116.610511,40.258672;116.610459,40.258678;116.610414,40.258684;116.610376,40.258687;116.610341,40.258684;116.610311,40.258677;116.610286,40.258667;116.610265,40.258656;116.610249,40.258645;116.610242,40.258639;116.610241,40.258639;116.610242,40.258639;116.610248,40.258638;116.61025,40.258638;116.610252,40.258638;116.610254,40.25864;116.610255,40.258642;116.610256,40.258643;116.610255,40.258643;116.610253,40.258642;116.610252,40.258642;116.610251,40.258642;116.610248,40.258638;116.610245,40.258631;116.610241,40.258622;116.610238,40.258614;116.610235,40.258606;116.610233,40.258598;116.610232,40.258588;116.610231,40.258578;116.61023,40.258568;116.61023,40.258558;116.61023,40.258545;116.610231,40.258529;116.610237,40.258511;116.610242,40.258498;116.610252,40.25848;116.610265,40.258463;116.610283,40.258445;116.610305,40.258428;116.610333,40.258415;116.610371,40.258403;116.610422,40.258392;116.610479,40.258381;116.610537,40.258372;116.6106,40.258364;116.61067,40.258355;116.610742,40.258347;116.610814,40.25834;116.610888,40.258333;116.610964,40.258326;116.611041,40.258318;116.611118,40.258311;116.611196,40.258302;116.611274,40.258292;116.611356,40.258283;116.61144,40.258273;116.611526,40.258264;116.611611,40.258256;116.611697,40.258247;116.611784,40.258239;116.61187,40.258229;116.611957,40.258219;116.612043,40.258208;116.61213,40.258196;116.612216,40.258185;116.612305,40.258175;116.612396,40.258166;116.612487,40.258156;116.612577,40.258143;116.612668,40.258129;116.61276,40.258114;116.612853,40.258099;116.612949,40.258083;116.613042,40.25807;116.613136,40.258058;116.61323,40.258046;116.613325,40.258034;116.613421,40.258022;116.613517,40.25801;116.613614,40.257999;116.613713,40.257987;116.61381,40.257975;116.613907,40.257962;116.614006,40.257951;116.614106,40.25794;116.614205,40.257928;116.614305,40.257916;116.614405,40.257904;116.614504,40.257891;116.614604,40.257881;116.614705,40.257869;116.614809,40.257856;116.614916,40.257843;116.615024,40.25783;116.615133,40.257816;116.615241,40.257803;116.61535,40.257789;116.615459,40.257775;116.615568,40.257762;116.615676,40.257749;116.615783,40.257735;116.615891,40.257721;116.616,40.257708;116.616106,40.257697;116.616212,40.257686;116.616319,40.257675;116.616425,40.257663;116.616533,40.257651;116.616643,40.257638;116.616755,40.257623;116.616867,40.257608;116.616979,40.257596;116.61709,40.257582;116.617192,40.257564;116.617286,40.257537;116.617373,40.257502;116.617452,40.257461;116.617533,40.257426;116.617617,40.2574;116.617706,40.257387;116.617798,40.257377;116.617892,40.257367;116.617983,40.257358;116.618075,40.257347;116.618168,40.257338;116.618264,40.257332;116.618352,40.257321;116.618444,40.257312;116.618533,40.257303;116.618616,40.257292;116.618699,40.257281;116.618783,40.257272;116.618866,40.257265;116.61895,40.257255;116.619036,40.257244;116.619127,40.257243;116.619216,40.25724;116.6193,40.257231;116.619381,40.257227;116.619461,40.257222;116.619541,40.257215;116.619622,40.257208;116.619699,40.2572;116.619775,40.257188;116.619853,40.257178;116.619925,40.25717;116.619996,40.257168;116.620062,40.257162;116.620121,40.257157;116.620175,40.257155;116.620224,40.257158;116.620268,40.257165;116.620308,40.257179;116.620343,40.257198;116.620375,40.257225;116.6204,40.257262;116.620418,40.257303;116.620428,40.257347;116.620435,40.257395;116.620438,40.25745;116.62044,40.257504;116.620444,40.257555;116.620448,40.257606;116.620451,40.257661;116.620454,40.257721;116.620457,40.257781;116.620461,40.257843;116.620464,40.25791;116.620465,40.257984;116.620465,40.25806;116.620466,40.258138;116.620468,40.258214;116.620469,40.258291;116.620469,40.258371;116.620466,40.258453;116.620462,40.258538;116.62046,40.25862;116.620461,40.258694;116.62046,40.258776;116.620457,40.258862;116.620453,40.258947;116.620447,40.259033;116.620441,40.259118;116.620435,40.259206;116.620428,40.259293;116.620418,40.259381;116.620406,40.25947;116.620391,40.259561;116.620375,40.259653;116.620358,40.259746;116.62034,40.259841;116.62032,40.259937;116.6203,40.260031;116.620278,40.260124;116.620255,40.260216;116.620233,40.260306;116.620211,40.260396;116.62019,40.260486;116.62017,40.260575;116.620149,40.260662;116.620127,40.260749;116.620104,40.260835;116.620082,40.260919;116.620061,40.261003;116.62004,40.261087;116.620019,40.26117;116.62,40.261253;116.619981,40.261337;116.619961,40.261421;116.61994,40.261505;116.61992,40.261588;116.619898,40.261672;116.619876,40.261756;116.619855,40.26184;116.619835,40.261925;116.619816,40.262008;116.619797,40.262088;116.619779,40.262166;116.619762,40.262241;116.619747,40.262313;116.619732,40.262381;116.619719,40.262447;116.619709,40.262508;116.619703,40.262562;116.619699,40.262605;116.619694,40.262636;116.619692,40.262656;116.61969,40.262663;116.61969,40.262664;116.619689,40.262664;116.619687,40.262668;116.619683,40.262682;116.619681,40.262703;116.619679,40.262731;116.619681,40.262761;116.619692,40.262791;116.619712,40.262817;116.619743,40.26284;116.619781,40.262857;116.619826,40.26287;116.619877,40.262876;116.619933,40.262876;116.619992,40.262874;116.620052,40.262872;116.620117,40.262872;116.620192,40.26287;116.62027,40.262869;116.620352,40.262866;116.620442,40.262864;116.62054,40.262862;116.620642,40.262861;116.620749,40.262859;116.620862,40.262857;116.620977,40.262854;116.621096,40.262851;116.621214,40.262848;116.621331,40.262846;116.621446,40.262844;116.621558,40.262834;116.621665,40.262825;116.621785,40.262837;116.621923,40.262839;116.622022,40.26283;116.622124,40.262829;116.62223,40.26283;116.622339,40.262831;116.62245,40.262832;116.622565,40.262834;116.622684,40.262837;116.622803,40.262839;116.622923,40.262838;116.623046,40.262838;116.623172,40.262838;116.623303,40.262837;116.623434,40.262836;116.623568,40.262835;116.623701,40.262835;116.623835,40.262834;116.623972,40.262834;116.624113,40.262833;116.624256,40.262831;116.6244,40.262829;116.624544,40.262828;116.624688,40.262827;116.624833,40.262826;116.624977,40.262826;116.625121,40.262825;116.625264,40.262824;116.625406,40.262822;116.625548,40.262821;116.62569,40.26282;116.625834,40.262819;116.625979,40.262819;116.626125,40.262818;116.626272,40.262818;116.626418,40.262818;116.626565,40.262818;116.626712,40.262819;116.626859,40.262822;116.627005,40.262826;116.627152,40.262831;116.627298,40.262837;116.627445,40.262843;116.62759,40.262849;116.627734,40.262857;116.627875,40.262865;116.628016,40.262873;116.628154,40.26288;116.628293,40.262888;116.628431,40.262898;116.628567,40.262908;116.628703,40.262918;116.628838,40.262928;116.628973,40.262938;116.629107,40.262947;116.62924,40.262957;116.629371,40.262968;116.629502,40.262978;116.62963,40.262989;116.629757,40.262998;116.629881,40.263007;116.629999,40.263015;116.630115,40.263023;116.630224,40.263031;116.630324,40.263038;116.630414,40.263044;116.630489,40.263049;116.630548,40.263054;116.630596,40.263057;116.630636,40.26306;116.630666,40.263067;116.630683,40.263075;116.630693,40.263079;116.630696,40.263085;116.630698,40.263086;116.630699,40.263088;116.630701,40.263091;116.630704,40.263092;116.630724,40.263082;116.63073,40.26308;116.63073,40.263075;116.630732,40.263072;116.630744,40.263072;116.630762,40.263075"



        function str2arr(str) {
            var path_arr = str.split(";")
            var coor_arr = []
            for (var i = 0; i < path_arr.length; i++) {
                var coor = path_arr[i].split(",")
                console.log(coor)
                coor = wgs84togcj02(parseFloat(coor[0]), parseFloat(coor[1]))
                console.log(coor)
                coor = new so.maps.LatLng(coor[1], coor[0])
                coor_arr.push(coor)
            }
            return coor_arr
        }

        function initialize() {
            var mapOptions = {
                zoom: 13,
                center: new so.maps.LatLng(39.912896, 116.397003),
                disableDefaultUI: true
            }; var map = new so.maps.Map(document.getElementById('map-canvas'), mapOptions);


            /* var p1 = str2arr(p1_str)
            var p1_path = new so.maps.Polyline({
                path: p1
            });
            p1_path.setMap(map); 

            map.setCenter(p1[0])
            */

            var p2 = str2arr(p2_str)
            var p2_path = new so.maps.Polyline({
                path: p2
            });
            p2_path.setMap(map);
            map.setCenter(p2[0])


            /*  var p3 = str2arr(p3_str)
             var p3_path = new so.maps.Polyline({
                 path: p3
             });
             p3_path.setMap(map);
             map.setCenter(p3[0]) */
        }
    </script>
</head>

<body onload="initialize()">
    <div id="map-canvas"></div>
</body>

</html>